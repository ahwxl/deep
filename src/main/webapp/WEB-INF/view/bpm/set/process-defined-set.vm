#parse("././globle.vm" )
<html>
<head>
<title>表单列表</title>
	<link href="$cxt/static/css/select2.min.css" rel="stylesheet" type="text/css"/>
	<link href="$cxt/static/css/jquery.gritter.css" rel="stylesheet" type="text/css"/>
	<script type="text/javascript" src="$cxt/static/js/jquery.gritter.js"></script>
    <script type="text/javascript" src="$cxt/static/js/select2/select2-403.min.js"></script>
	<script type="text/javascript" src="$cxt/static/js/jquery.dataTables.js?20170216"></script>
	<script type="text/javascript" src="$cxt/static/js/DT_bootstrap.js"></script>
	<script type="text/javascript" src="$cxt/static/js/jquery.validate.min.js"></script>
	<script type="text/javascript" src="$cxt/static/js/jquery.form.min.js"></script>
    <script type="text/javascript" src="$cxt/static/js/module/process-set.js?20170301"></script>
</head>
<body>
               <!-- BEGIN PAGE HEADER-->

				<div class="row-fluid">
					<div class="span12">
					</div>
				</div>

				<!-- END PAGE HEADER-->

				<!-- BEGIN PAGE CONTENT-->
                <div class="portlet box " ng-app="phonecatApp"  ng-init="processDefinedId='${defined.processDefinedId}'" ng-controller="PhoneListController">

							<div class="portlet-title">

								<div class="caption"><i class="icon-globe">流程设置{{processDefinedId}}</i></div>
								
								<div class="actions">

									<a href="#" id="mySubmit" class="btn green"><i class="icon-plus"></i> 添加</a>

								</div>

							</div>
							
							<div class="portlet-body form">
							<form action="#" name="myform" id="myform" class="form-horizontal ">
							<input type="text" name="processDefinedId" ng-change="queryActivity()" ng-model="processDefinedId" value="${defined.processDefinedId}" />
							
							<div class="row-fluid">
								<div class="span6 ">
									<div class="control-group">
										<label class="control-label">全局表单</label>
										<div class="controls">
											<input type="text" id="formId" name="formId" class="m-wrap span12" placeholder="选择表单" />
										</div>
									</div>
								</div>
								<!--/span-->
								<div class="span6 ">
									<div class="control-group">
										<label class="control-label">活动</label>
										<div class="controls">
											<select class="select2_activity" name="activityId" id="activity">
							                </select>
										</div>
									</div>
								</div>
								<!--/span-->
							</div>
							
							<div class="row-fluid">
								<div class="span6 ">
									<div class="control-group">
										<label class="control-label">审批人</label>
										<div class="controls">
											<input type="text" name="userId" class="m-wrap span12" placeholder="选择审批人员">
										</div>
									</div>
								</div>
								<!--/span-->
							</div>
							
							
							</form>
							</div>
							
							<!-- begin set -->
							
							<div class="row-fluid"  >

										<div class="span12">

											<div class="span3">
												<ul class="ver-inline-menu tabbable margin-bottom-10" ng-repeat="activity in activities">
													<li class=""><a data-toggle="tab" href="#tab_1-1" ng-click="toggle('{{activity.text}}')" ><i class="icon-cog"></i>{{activity.text}}</a></li>
												</ul>
											</div>

											<div class="span9">

												<div class="tab-content">

													<div id="tab_1-1" class="tab-pane active">

														<div style="height: auto;" id="accordion1-1" class="accordion collapse">

															<form action="#">

																<label class="control-label">表单</label>

																<input type="text" placeholder="John" class="m-wrap span8" ng-model="processDef.id" />

																<label class="control-label">选择用户{{w}}</label>

																<input type="text" placeholder="Doe" class="m-wrap span8" />

																<div class="submit-btn">

																	<a href="#" class="btn green">Save Changes</a>

																	<a href="#" class="btn">Cancel</a>

																</div>

															</form>

														</div>

													</div>

												</div>

											</div>

											<!--end span9-->                                   

										</div>

									</div>
							
							<!-- end set  -->
               </div>

				<div class="row-fluid">
				</div>
				
				<!-- END PAGE CONTENT-->
				
<div id="menuContent" class="menuContent" style="display:none; position: absolute;background: #f0f6e4;">
	<ul id="formTree" class="ztree" style="margin-top:0; width:160px;"></ul>
</div>

<script>



$(document).ready(function () {

var processDefinedId = $("#myform input[name=processDefinedId]").val();
$.ajax({
	url:cxt+'/bpm/queryProcessActivity',
	async:true,
	method:'POST',
	data:'processDefinitionId='+processDefinedId,
	dataType : 'json',
	error :function(resp){alert(resp)},
	success:function(resp){
		$(".select2_activity").select2({
			  "id": "id",
			  "text": "name",
			  "data": resp
		})
	}
});

$("#mySubmit").click(function (){
  $("#myform").trigger("submit");
});





});


</script>
</body>
</html>